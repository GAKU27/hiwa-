@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================
   灯輪（Hiwa）ベータ版 — グローバルスタイル
   ============================ */

@layer base {
    :root {
        --background: 222.2 84% 4.9%;
        --foreground: 210 40% 98%;
    }

    * {
        border-color: transparent;
    }

    html {
        scroll-behavior: smooth;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    body {
        background-color: #08080c;
        color: #e2e8f0;
        font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        overflow-x: hidden;
    }

    /* カラーピッカーのスタイリング */
    input[type="color"] {
        -webkit-appearance: none;
        appearance: none;
        border: none;
        padding: 0;
    }

    input[type="color"]::-webkit-color-swatch-wrapper {
        padding: 3px;
    }

    input[type="color"]::-webkit-color-swatch {
        border: none;
        border-radius: 50%;
    }

    /* スクロールバーを目立たなくする */
    ::-webkit-scrollbar {
        width: 4px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.06);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.12);
    }
}

/* ============================
   アニメーション定義
   ============================ */

@layer utilities {

    /* フェードイン */
    .animate-fade-in {
        animation: fadeIn 0.8s ease-out forwards;
    }

    .animate-fade-in-delay-1 {
        opacity: 0;
        animation: fadeIn 0.8s ease-out 0.15s forwards;
    }

    .animate-fade-in-delay-2 {
        opacity: 0;
        animation: fadeIn 0.8s ease-out 0.3s forwards;
    }

    .animate-fade-in-delay-3 {
        opacity: 0;
        animation: fadeIn 0.8s ease-out 0.45s forwards;
    }

    .animate-fade-in-delay-4 {
        opacity: 0;
        animation: fadeIn 0.8s ease-out 0.6s forwards;
    }

    /* 呼吸アニメーション */
    .animate-breathing {
        animation: breathing 3s ease-in-out infinite;
    }

    /* カーソル点滅 */
    .animate-blink {
        animation: blink 1s step-end infinite;
    }

    /* ドットバウンス */
    .animate-bounce-dot {
        animation: bounceDot 1.4s ease-in-out infinite;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(12px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes breathing {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.6;
    }

    50% {
        transform: scale(1.15);
        opacity: 1;
    }
}

@keyframes blink {

    0%,
    100% {
        opacity: 1;
    }

    50% {
        opacity: 0;
    }
}

@keyframes bounceDot {

    0%,
    80%,
    100% {
        transform: translateY(0);
        opacity: 0.3;
    }

    40% {
        transform: translateY(-6px);
        opacity: 0.8;
    }
}

/* ============================
   Textarea 自動リサイズ支援
   ============================ */
textarea {
    field-sizing: content;
}

/* ============================
   パーティクル / 星座ビュー 追加
   ============================ */

@keyframes twinkle {

    0%,
    100% {
        opacity: 0.2;
        transform: scale(0.8);
    }

    50% {
        opacity: 1;
        transform: scale(1.2);
    }
}

@keyframes pulseGlow {

    0%,
    100% {
        box-shadow: 0 0 4px currentColor;
    }

    50% {
        box-shadow: 0 0 16px currentColor, 0 0 32px currentColor;
    }
}

.animate-twinkle {
    animation: twinkle 3s ease-in-out infinite;
}

.animate-pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
}

/* ============================
   ダイブトランジション
   ============================ */

@keyframes diveExpand {
    0% {
        transform: scale(0);
        opacity: 1;
    }

    100% {
        transform: scale(350);
        opacity: 1;
    }
}

@keyframes diveContract {
    0% {
        transform: scale(350);
        opacity: 1;
    }

    100% {
        transform: scale(0);
        opacity: 0;
    }
}

.animate-dive-in {
    animation: diveExpand 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-dive-out {
    animation: diveContract 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.15s forwards;
}

/* ============================
   Material Dust（光の粒）
   ============================ */

@keyframes materialDust {
    0% {
        transform: translate(0, 0) scale(0.5);
        opacity: 0;
    }

    20% {
        opacity: 0.4;
    }

    80% {
        opacity: 0.2;
    }

    100% {
        transform: translate(var(--dust-dx, 40px), var(--dust-dy, -60px)) scale(1.2);
        opacity: 0;
    }
}

.animate-material-dust {
    animation: materialDust var(--dust-duration, 20s) ease-in-out infinite;
}

/* ============================
   リサージュ回転
   ============================ */

@keyframes lissajousRotate {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.animate-lissajous {
    animation: lissajousRotate 60s linear infinite;
}

/* ============================
   HIBIKI テキスト出現
   ============================ */

@keyframes hibikiReveal {
    0% {
        opacity: 0;
        filter: blur(10px);
        transform: translateY(5px);
    }

    100% {
        opacity: 1;
        filter: blur(0);
        transform: translateY(0);
    }
}

.animate-hibiki-reveal {
    animation: hibikiReveal 1.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
}

/* ============================
   メッセージアニメーション
   ============================ */

@keyframes msgAppear {
    0% {
        opacity: 0;
        transform: translateY(16px);
    }

    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-msg-appear {
    animation: msgAppear 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
}

/* AI メッセージのグロー */
@keyframes aiGlow {

    0%,
    100% {
        border-color: var(--glow-color, #fff);
        filter: drop-shadow(0 0 0px var(--glow-color, #fff));
    }

    50% {
        border-color: var(--glow-color, #fff);
        filter: drop-shadow(0 0 6px var(--glow-color, #fff));
    }
}

.animate-ai-glow {
    animation: aiGlow 3s ease-in-out infinite;
}